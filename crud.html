<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Haitong's Portfolio</title>
        <link rel="icon" href="images/home-icon.jpeg">
        <link rel="stylesheet" href="CSS/styles.css">
        <script async type="module" src="./JS/blog.js"></script>
        <script src="
            https://cdn.jsdelivr.net/npm/dompurify@3.0.0/dist/purify.min.js
        "></script>
    </head>
    <body>
        <h1>List of posts</h1>
        <p id="p1" class="crudBlog" title="Post 1 Title" date="Post 1 Date" 
        summary="Post 1 summary here. This post is just a placeholder."></p>

        <p id="p2" class="crudBlog" title="Post 2 Title" date="Post 2 Date" 
        summary="Post 2 summary here. This post is just a placeholder."></p>

        <ul id="blogList"></output>

        <script>
            let allBlogs = document.getElementsByClassName('crudBlog');
            allBlogs = Array.from(allBlogs)

            console.log(allBlogs.length)

            for(let i = 0; i < allBlogs.length; i++){
                let postBody = document.createElement('div')
                let el = document.createElement('p')

                el.classList.add('id')
                el.classList.add('title')
                el.classList.add('date')
                el.classList.add('summary')

                el.setAttribute('id', allBlogs[i].getAttribute('id'))
                el.setAttribute('title', allBlogs[i].getAttribute('title'))
                el.setAttribute('date', allBlogs[i].getAttribute('date'))
                el.setAttribute('summary', allBlogs[i].getAttribute('summary'))

                el.innerText = `${el.getAttribute('title')}
                Date: ${el.getAttribute('date')}
                Summary: ${el.getAttribute('summary')}`

                postBody.appendChild(el)

                let editBtn = document.createElement('button')
                let deleteBtn = document.createElement('button')
                postBody.appendChild(editBtn)
                postBody.appendChild(deleteBtn)

                document.getElementById('blogList').appendChild(postBody)

            }
        </script>
    </body>
</html>
